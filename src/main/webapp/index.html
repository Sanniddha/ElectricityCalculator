<!DOCTYPE html>
<html>
<head>
    <title>Electricity Calculator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    
    <script src="https://cdn.anychart.com/releases/8.12.0/js/anychart-bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.anychart.com/releases/8.12.0/css/anychart-ui.min.css" type="text/css">
    <link rel="stylesheet" type="text/css" href="https://cdn.anychart.com/releases/8.12.0/fonts/css/anychart-font.min.css"/>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	
	<script src="assets/js/fontawesome6.5.1.js"></script>
    
    <style>
    	body{
		    overflow-x:hidden;
		    padding: 10px;
			background-image: url('assets/images/background.jpg');
			background-position: center;
			background-repeat: no-repeat;
			background-size: cover;
			background-attachment: fixed;
		}
    	.anychart-credits{
		    display: none !important;
		}
    	.container-graph{
		    text-align: center !important;
		    height: 480px;
		    margin: 20px 0px 10px 0px;
		    padding: 0;
		    box-shadow: 0px 0px 5px 1px gray;
			-webkit-box-shadow: 0px 0px 5px 1px gray;
			-moz-box-shadow: 0px 0px 5px 1px gray;
			/* position: relative;
			bottom: 5px; */
		}
		#windGraph{
			position: relative;
			bottom: -55px;
		}
		.solarForm-input, .windForm-input{
			outline: none !important;
			border-radius: 5px;
			border: 1px solid #00e01e;
			color: #01b728 !important;
		}
		.solarForm-input:focus, .windForm-input:focus{
			border: 1px solid #8dfb9c;
			box-shadow: 0px 0px 1px 1px #02f723;
			-webkit-box-shadow: 0px 0px 1px 1px #02f723;
			-moz-box-shadow: 0px 0px 1px 1px #02f723;
		}
		.solarForm-input-group-text, .windForm-input-group-text{
			border: 1px solid #00e01e;
			background-color: #00d62e;
			color: white;
		}
		.heading{
			color: rgb(0 209 159);
			font-size: 25px;
			margin-bottom: 15px;
			font-weight: bold
		}
		.solarForm-label, .windForm-label{
			color: #515151;
		}

		.source-link{
			color: white;
			text-decoration: none !important;
		}
		.source-link:hover{
			color:#ceebfd 
		}
		.input-HelpBlock{
			color: black;
		}
		/* @media only screen and (min-device-width : 768px){
			#windGraph{
				margin-top: 20px;
			}
		} */
    </style>
</head>
<body>
	<div class="row" style="gap:15px">
		<div class="col-md mb-5">
			<div class="heading">Calculate Electricity Generated by Solar Energy (in kW)</div>

			<form id="solarForm" action="/ElectricityCalculator/calculate-solar-energy" method="post" enctype="multipart/form-data">        
				<div class="row mb-3">
					<div class="col-md text-md-end">
						<label class="solarForm-label" for="solarTotal"><b>Total No. of Solar Panel:</b></label>
					</div>
					<div class="col-md">
						<div class="input-group">
							<input type="number" step="1" class="form-control solarForm-input" placeholder="Total Solar Panels" id="solarTotal" name="solarTotal" required form="solarForm">
							<span class="input-group-text solarForm-input-group-text">Unit</span>
						</div>
					</div>
				</div>
				
				<div class="row mb-3">
					<div class="col-md text-md-end">
						<label class="solarForm-label" for="solarArea"><b>Area of the Solar Panel (in m<sup>2</sup>):</b></label>
					</div>
					<div class="col-md">
						<div class="input-group">
							<input type="number" step="0.01" class="form-control solarForm-input" placeholder="Panel Area" id="solarArea" name="solarArea" required form="solarForm">
							<span class="input-group-text solarForm-input-group-text">m<sup>2</sup></span>
						</div>
					</div>
				</div>

				<div class="row mb-3">
					<div class="col-md text-md-end">
						<label class="solarForm-label" for="solarEfficiency"><b>Efficiency or yield of the Solar Panel (%):</b>&nbsp;<i class="fa-solid fa-circle-info" data-bs-content="Yield of solar panel = electrical power (in kWp) of one solar panel divided by the area of one panel" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-trigger="hover" data-bs-html="false"></i></label>
					</div>
					<div class="col-md">
						<div class="input-group">
							<input type="number" step="0.01" class="form-control solarForm-input" placeholder="Efficiency" id="solarEfficiency" name="solarEfficiency" required form="solarForm">
							<span class="input-group-text solarForm-input-group-text">%</span>
						</div>
					</div>
				</div>

				<div class="row mb-3">
					<div class="col-md text-md-end">
						<label class="solarForm-label" for="solarPerformance"><b>Performance Ratio:</b>&nbsp;<i class="fa-solid fa-circle-info" data-bs-content="Performance ratio or coefficient for losses generally ranges between 0.5 to 0.9<br><b>Example of losses that gives the PR value:</b><ul><li>shadow losses</li><li>Temperature losses</li><li>Losses due to dust</li><li>DC cables losses</li><li>AC cables losses</li><li>Inverter losses</li></ul>" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-trigger="hover" data-bs-html="true"></i></label>
					</div>
					<div class="col-md">
						<div class="input-group">
							<input type="number" step="0.1" class="form-control solarForm-input" placeholder="Performance Ratio" id="solarPerformance" name="solarPerformance" required form="solarForm">
							<!-- <span class="input-group-text solarForm-input-group-text"></span> -->
						</div>
					</div>
				</div>

				<div class="row mb-3">
					<div class="col-md text-md-end">
						<label class="solarForm-label" for="solarCSV"><b>Monthly Avg. Solar Radiation:</b></label>
					</div>
					<div class="col-md">
						<div class="input-group">
							<input type="file" class="form-control solarForm-input" id="solarCSV" name="solarCSV" accept=".csv" required form="solarForm">
							<label class="input-group-text solarForm-input-group-text" for="solarCSV">KW/m<sup>2</sup></label>
						</div>
						<div id="solarCSVHelpBlock" class="form-text input-HelpBlock">
							Upload the CSV file to read the data of avg. hour of sunlight of each month
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col text-end">
						<button class="btn btn-danger" id="solarForm-reset" type="reset" form="solarForm">Reset</button>
						<button class="btn btn-primary" id="solarForm-submit" type="submit" form="solarForm">Calculate</button>
					</div>
				</div>
			</form>

			<div class="container-graph" id="solarGraph"></div>
		</div>



		<div class="col-md mb-5">

    		<div class="heading">Calculate Electricity Generated by Wind Energy (in kW)</div>

			<form id="windForm" action="/ElectricityCalculator/calculate-wind-energy" method="post" enctype="multipart/form-data">
				<div class="row mb-3">
					<div class="col-md text-md-end">
						<label class="windForm-label" for="windTotal"><b>Total No. of Wind Turbines:</b></label>
					</div>
					<div class="col-md">
						<div class="input-group">
							<input type="number" step="1" class="form-control windForm-input" placeholder="Total Wind Turbines" id="windTotal" name="windTotal" required form="windForm">
							<span class="input-group-text windForm-input-group-text">Unit</span>
						</div>
					</div>
				</div>
				
				<div class="row mb-3">
					<div class="col-md text-md-end">
						<label class="windForm-label" for="airDensity"><b>Air Density (in kg/m<sup>3</sup>):</b>&nbsp;<i class="fa-solid fa-circle-info" data-bs-content='<div>The standard density of the air is 1.225 kg/m<sup>3</sup></div>' data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-trigger="hover" data-bs-html="true"></i></label>
					</div>
					<div class="col-md">
						<div class="input-group">
							<input type="number" step="0.01" class="form-control windForm-input" placeholder="Density" id="airDensity" name="airDensity" required form="windForm">
							<span class="input-group-text windForm-input-group-text">kg/m<sup>3</sup></span>
						</div>
					</div>
				</div>

				<div class="row mb-3">
					<div class="col-md text-md-end">
						<label class="windForm-label" for="bladeLength"><b>Length of the Blades (in Meters):</b></label>
					</div>
					<div class="col-md">
						<div class="input-group">
							<input type="number" step="0.1" class="form-control windForm-input" placeholder="Length" id="bladeLength" name="bladeLength" required form="windForm">
							<span class="input-group-text windForm-input-group-text">M</span>
						</div>
					</div>
				</div>

				<div class="row mb-3">
					<div class="col-md text-md-end">
						<label class="windForm-label" for="windCSV"><b>Monthly avg. Wind Speed:</b></label>
					</div>
					<div class="col-md">
						<div class="input-group">
							<input type="file" class="form-control windForm-input" id="windCSV" name="windCSV" accept=".csv" required form="windForm">
							<label class="input-group-text windForm-input-group-text" for="windCSV">m/s</label>
						</div>
						<div id="windCSVHelpBlock" class="form-text input-HelpBlock">
							Upload the CSV file to read the data of avg. wind speed of each month
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col text-end">
						<button class="btn btn-danger" id="windForm-reset" type="reset" form="windForm">Reset</button>
						<button class="btn btn-primary" id="windForm-submit" type="submit" form="windForm">Calculate</button>
					</div>
				</div>
			</form>

			<div class="container-graph" id="windGraph"></div>
    	</div>
    </div>


    <h2>Sources:</h2>
    <ul>
        <li style="color:white"><a class="source-link" href="https://www.linkedin.com/pulse/how-calculate-output-solar-pv-system-detailed-guide-eman-rohayem/" target="_blank">How to Calculate the Output of a Solar PV System</a></li>
        <li style="color:white"><a class="source-link" href="https://photovoltaic-software.com/principle-ressources/how-calculate-solar-energy-power-pv-systems" target="_blank">How to calculate the annual solar energy output of a photovoltaic system?</a></li>
        <li style="color:white"><a class="source-link" href="https://thundersaidenergy.com/downloads/wind-power-impacts-of-larger-turbines/" target="_blank">Windy physics: how is power of a wind turbine calculated?</a></li>
        <li style="color:white"><a class="source-link" href="https://www.e-education.psu.edu/emsc297/node/649" target="_blank">Wind Energy and Power Calculations</a></li>
    </ul>

    <script>
	    function plotSolarGraph(data=[]){
	    	chart_solar = anychart.area();
	  	         
		        	// enable animation and set animation duration to 2 sec
	  	         chart_solar.animation(true, 2000);
	
	  	         // set the chart title
	  	         var title = chart_solar.title();
	  	         title.enabled(true);
	  	         title.useHtml(true);
	  	         title.text("Monthly Electricity Generated by Solar Energy (in kW)");
	  	         title.padding(13, 0, 5, 0)
	  	         //title.fontSize(12);
	
	  	         // set the titles of the axes
	  	         chart_solar.xAxis().title("Month");
	  	       chart_solar.yAxis().title("Electricity Generated (in kW)");
	  	       chart_solar.xAxis().title().fontColor("gray");
	  	     chart_solar.yAxis().title().fontColor("gray");
	
	  	         // set the orientation of the axis label
	  	         chart_solar.yAxis().orientation("left");
	  	       chart_solar.xAxis().orientation("bottom");
	
	  	         // adjusting axes labels
	  	         chart_solar.yAxis().labels().fontSize(11);
	  	       chart_solar.yAxis().labels().rotation(-90);
	  	     chart_solar.yAxis().labels().padding(0,20,0,0);
	  	   chart_solar.xAxis().labels().fontSize(11);
	  	 chart_solar.xAxis().labels().rotation(-45);
	  	chart_solar.xAxis().labels().padding(0,0,0,0);
	  	         
	  	     //configure tooltip text
	             chart_solar.tooltip().format(`Energy: {%value}`);
	
	  	         var credits = chart_solar.credits();
	  	         credits.enabled(false);
	  	         
	  	       if(data.length <= 0){
	  	            noDataLabel = chart_solar.noData().label();
	  	            noDataLabel.enabled(true);
	  	            noDataLabel.text("No Data");
	  	            noDataLabel.background().enabled(true);
	  	            noDataLabel.background().fill("White 1");
	  	            noDataLabel.background().stroke("2 gray");
	  	            noDataLabel.padding(20);
	  	            noDataLabel.fontSize(30);
	  	            noDataLabel.fontColor("gray");
	  	            noDataLabel.fontVariant("small-caps");
	  	        }
	  	       else{
	  	    	// enable the crosshair
	  	    	 chart_solar.crosshair(true);
	  	    	// enable major grids
	  	    	 chart_solar.xGrid().enabled(true);
	  	    	chart_solar.yGrid().enabled(true);
	  	    	 // enable minor grids
	  	    	 chart_solar.xMinorGrid().enabled(true);
	  	    	chart_solar.yMinorGrid().enabled(true);
	  	    	 var series = chart_solar.line(data);
	  	       }
		         // enable context menu
		        chart_solar.contextMenu(true);
	  	         
	   	   // set container and draw chart
	   	   	$("#solarGraph").html('');
	   	 chart_solar.container("solarGraph");
	   	 chart_solar.draw();
	   	}
		$("#solarForm").on('reset', function(){
			plotSolarGraph();
		});
       	$("#solarForm").on('submit', function(event){
       	    event.preventDefault();
       	    var theForm = new FormData(this);
       	    $("#solarForm-submit").prop("disabled", true);
       	    $("#solarForm-submit").html("Calculating");
       	    $.ajax(
       	    {
       	        type: 'POST',
       	        url: $(this).attr('action'),
       	        data: theForm,
       	        contentType: false,
       	        processData: false,
       	        //dataType: 'json',
       	        cache: false,
       	        success: function (response) {
       	        	var data = [];
       	        	for(var i=0; i<response.monthsList.length; i++){
       	        		var d = {
       	        				x: response.monthsList[i],
       	        				value: response.electricityGeneratedList[i]
       	        		}
       	        		data.push([d['x'], d['value']]);
       	        	}
       	        	plotSolarGraph(data);
       	        	$("#solarForm-submit").prop("disabled", false);
       	       	    $("#solarForm-submit").html("Calculate");
       	        },
       	        error: function (response) {
       	        	$("#solarForm-submit").prop("disabled", false);
       	       	    $("#solarForm-submit").html("Calculate");
       	       	    alert("Something went wrong!");
       	        }
       	    });
       	});

       	function plotWindGraph(data=[]){
        	chart_wind = anychart.line();
      	         
  	        	// enable animation and set animation duration to 2 sec
      	         chart_wind.animation(true, 2000);

      	         // set the chart title
      	         var title = chart_wind.title();
      	         title.enabled(true);
      	         title.useHtml(true);
      	         title.text("Monthly Electricity Generated by Wind Energy (in kW)");
      	         title.padding(13, 0, 5, 0)
      	         //title.fontSize(12);

      	         // set the titles of the axes
      	         chart_wind.xAxis().title("Month");
      	         chart_wind.yAxis().title("Electricity Generated (in kW)");
      	         chart_wind.xAxis().title().fontColor("gray");
      	         chart_wind.yAxis().title().fontColor("gray");

      	         // set the orientation of the axis label
      	         chart_wind.yAxis().orientation("left");
      	         chart_wind.xAxis().orientation("bottom");

      	         // adjusting axes labels
      	         chart_wind.yAxis().labels().fontSize(11);
      	         chart_wind.yAxis().labels().rotation(-90);
      	         chart_wind.yAxis().labels().padding(0,20,0,0);
      	         chart_wind.xAxis().labels().fontSize(11);
      	         chart_wind.xAxis().labels().rotation(-45);
      	         chart_wind.xAxis().labels().padding(0,0,0,0);
      	         
      	     //configure tooltip text
                 chart_wind.tooltip().format(`Energy: {%value}`);

      	         var credits = chart_wind.credits();
      	         credits.enabled(false);
      	         
      	       if(data.length <= 0){
      	            noDataLabel = chart_wind.noData().label();
      	            noDataLabel.enabled(true);
      	            noDataLabel.text("No Data");
      	            noDataLabel.background().enabled(true);
      	            noDataLabel.background().fill("White 1");
      	            noDataLabel.background().stroke("2 gray");
      	            noDataLabel.padding(20);
      	            noDataLabel.fontSize(30);
      	            noDataLabel.fontColor("gray");
      	            noDataLabel.fontVariant("small-caps");
      	        }
      	       else{
      	    	// enable the crosshair
      	    	 chart_wind.crosshair(true);
      	    	// enable major grids
      	    	 chart_wind.xGrid().enabled(true);
      	    	chart_wind.yGrid().enabled(true);
      	    	 // enable minor grids
      	    	 chart_wind.xMinorGrid().enabled(true);
      	    	chart_wind.yMinorGrid().enabled(true);
      	    	 var series = chart_wind.line(data);
      	       }
    	         // enable context menu
    	        chart_wind.contextMenu(true);
      	         
       	   // set container and draw chart
       	   	$("#windGraph").html('');
       	    chart_wind.container("windGraph");
      	  	chart_wind.draw();
       	}
		$("#windForm").on('reset', function(){
			plotWindGraph();
		});
       	$("#windForm").on('submit', function(event){
       	    event.preventDefault();
       	    var theForm = new FormData(this);
       	 $("#windForm-submit").prop("disabled", true);
       	    $("#windForm-submit").html("Calculating");
       	    $.ajax(
       	    {
       	        type: 'POST',
       	        url: $(this).attr('action'),
       	        data: theForm,
       	        contentType: false,
       	        processData: false,
       	        //dataType: 'json',
       	        cache: false,
       	        success: function (response) {
       	        	var data = [];
       	        	for(var i=0; i<response.monthsList.length; i++){
       	        		var d = {
       	        				x: response.monthsList[i],
       	        				value: response.electricityGeneratedList[i]
       	        		}
       	        		data.push(d);
       	        	}
       	        	plotWindGraph(data);
       	        	$("#windForm-submit").prop("disabled", false);
       	       	    $("#windForm-submit").html("Calculate");
       	        },
       	        error: function (response) {
       	        	$("#windForm-submit").prop("disabled", false);
       	       	    $("#windForm-submit").html("Calculate");
       	       	    alert("Something went wrong!");
       	        }
       	    });
       	});
       	
       	$(window).on('load', function(){
       		$('[data-bs-toggle="popover"]').popover();
       		plotSolarGraph()
       		plotWindGraph();
       	})
    </script>
</body>
</html>